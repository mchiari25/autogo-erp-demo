{% extends 'layout.html' %}

{% block content %}
<h1>{{ 'Editar' if car else 'Nuevo' }} Vehículo</h1>
<form method="post">
    <div class="mb-3">
        <label for="brand" class="form-label">Marca</label>
        <input type="text" class="form-control" id="brand" name="brand" value="{{ form.get('brand', '') }}" required>
    </div>
    <div class="mb-3">
        <label for="model" class="form-label">Modelo</label>
        <input type="text" class="form-control" id="model" name="model" value="{{ form.get('model', '') }}" required>
    </div>
    <div class="mb-3">
        <label for="year" class="form-label">Año</label>
        <input type="number" class="form-control" id="year" name="year" value="{{ form.get('year', '') }}" required>
    </div>
    <div class="mb-3">
        <label for="vin" class="form-label">VIN</label>
        <input type="text" class="form-control" id="vin" name="vin" value="{{ form.get('vin', '') }}" required>
    </div>
    <div class="mb-3">
        <label for="color" class="form-label">Color</label>
        <input type="text" class="form-control" id="color" name="color" value="{{ form.get('color', '') }}" required>
    </div>
    <div class="mb-3">
        <label for="price" class="form-label">Precio (USD)</label>
        <input type="number" step="0.01" class="form-control" id="price" name="price" value="{{ form.get('price', '') }}" required>
    </div>
    <div class="mb-3">
        <label for="status" class="form-label">Estado</label>
        <select class="form-select" id="status" name="status">
            {% set current_status = form.get('status', car.status if car else 'Disponible') %}
            {% for option in ['Disponible', 'Vendido', 'Reservado'] %}
                <option value="{{ option }}"{% if option == current_status %} selected{% endif %}>{{ option }}</option>
            {% endfor %}
        </select>
    </div>
    <div class="mb-3">
        <label for="entry_date" class="form-label">Fecha de ingreso</label>
        <input type="date" class="form-control" id="entry_date" name="entry_date" value="{{ form.get('entry_date', '') }}">
    </div>
    <button type="submit" class="btn btn-success">{{ 'Actualizar' if car else 'Guardar' }}</button>
    <a href="{{ url_for('main.list_cars') }}" class="btn btn-secondary">Cancelar</a>
</form>
{% endblock %}